<html lang="en">

  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="./main.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/hiukim/mind-ar-js@1.1.4/dist/mindar-image.prod.js"></script>
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/hiukim/mind-ar-js@1.1.4/dist/mindar-image-aframe.prod.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/mind-ar@1.1.4/dist/mindar-image-three.prod.js"></script>
    
  </head>

  <body>

    <div id="container">
    </div>

    <script type="module">

      const THREE = window.MINDAR.IMAGE.THREE;
      const mindarThree = new window.MINDAR.IMAGE.MindARThree({
        container: document.querySelector("#container"),
        imageTargetSrc: "https://cdn.jsdelivr.net/npm/mind-ar@1.1.4/examples/image-tracking/assets/card-example/card.mind"
      });
      const {renderer, scene, camera, geometry, material, mesh} = mindarThree;
      const start = async() => {
        await mindarThree.start();
        renderer.setAnimationLoop(() => {
          renderer.render(scene, camera);
        });
      }
	    start();

      init();
      animate();

      function init() {

          scene = new THREE.Scene();

          camera = new THREE.PerspectiveCamera(50, window.innerWidth / window.innerHeight, 1, 10000);
          camera.position.z = 500;
          scene.add(camera);

          geometry = new THREE.CubeGeometry(200, 200, 200);
          material = new THREE.MeshNormalMaterial();

          mesh = new THREE.Mesh(geometry, material);
          scene.add(mesh);

          renderer = new THREE.CanvasRenderer();
          renderer.setSize(window.innerWidth, window.innerHeight);

      }

      function animate() {

          requestAnimationFrame(animate);
          render();

      }

      function render() {

          mesh.rotation.x += 0.01;
          mesh.rotation.y += 0.02;

          renderer.render(scene, camera);

      }

    </script>

  </body>

</html>

